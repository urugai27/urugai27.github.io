<!DOCTYPE html>
<html>
<head>
<meta charset="Shift-JIS">
<title>乗車時刻の時を設定する</title>
<style>
 form {
  width: 183px;
  padding:8px;			/*ボックス内側の余白 */
  white-space: nowrap;  /*半角スペース、タブ、改行をブラウザでどのように表示させるかを決めます。:折り返しされない*/
  border: solid 1px #ff0000; /*赤色 */
  
  background-color : #F2F2F2 ;		/*背景色を薄い灰色 */
}	

</style>
<script>
    function proc() {
/*    
      elem = document.getElementById("output");
      elem.innerText = "JavaScriptが実行されました。";
*/      
// 入力されたキーと値を取り出す
	var key = "rideTimeHH";
// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var hour_index = 7;

	console.log( localData );

	 		switch (localData) {
			case "06":		        hour_index = 0;			break;
			case "07":		        hour_index = 1;			break;
			case "08":		        hour_index = 2;			break;
			case "09":		        hour_index = 3;			break;
			case "10":		        hour_index = 4;			break;
			case "11":		        hour_index = 5;			break;
			case "12":		        hour_index = 6;			break;
			case "13":		        hour_index = 7;			break;
			case "14":		        hour_index = 8;			break;
			case "15":		        hour_index = 9;			break;
			case "16":		        hour_index =10;			break;
			case "17":		        hour_index =11;			break;
			case "18":		        hour_index =12;			break;
			case "19":		        hour_index =13;			break;
			case "20":		        hour_index =14;			break;
			case "21":		        hour_index =15;			break;
			case "22":		        hour_index =16;			break;
			default:
		//いずれも一致しなかった場合;
		   	console.log("いずれも一致しなかった");
			break;
			};


	document.getElementById("hour").selectedIndex = hour_index;

    }
</script>
</head>
<body onload="proc();">				<!-- bodyタグのonloadに記述する方法 -->
<!--<div id="output"></div>         -->
<form name="form1">
項目を選択
<br>
<select id="hour" size="10">
<option value="06">06　　　　　　　　　　　</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>

</select>
<br>　　　　　　　　&nbsp;
<input type="button" onclick="clickBtn1()"  value="ＯＫ">
</form>
<script>
function clickBtn1(){

	const hour = document.form1.hour;

	// 値(数値)を取得
	const num = hour.selectedIndex;
	//const num = document.form1.hour.selectedIndex;

	// 値(数値)から値(value値)を取得
	const str = hour.options[num].value;
	//const str = document.form1.hour.options[num].value;

/*	document.getElementById("span1").textContent = str; 	*/
	
	console.log(str);	

// 入力されたキーと値を取り出す
	var key = "rideTimeHH";
	var data = str;

// ローカルストレージに保存する
	localStorage.setItem(key,data);
// セッションストレージに保存する
	sessionStorage.setItem(key,data);

// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var sessionData = sessionStorage.getItem(key);

    // 親ウィンドウのオブジェクトを操作
    window.opener.document.form1.rideTimeHH.value = data;

	window.close();

}
</script>
</body>
</html>
