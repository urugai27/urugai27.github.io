<!DOCTYPE html>
<html>
<head>
<meta charset="Shift-JIS">
<title>乗車月日の日を設定する</title>
<style>
 form {
  width: 183px;
  padding:8px;			/*ボックス内側の余白 */
  white-space: nowrap;  /*半角スペース、タブ、改行をブラウザでどのように表示させるかを決めます。:折り返しされない*/
  border: solid 1px #ff0000; /*赤色 */
  
  background-color : #F2F2F2 ;		/*背景色を薄い灰色 */
}	

</style>
<script>
    function proc() {
/*    
      elem = document.getElementById("output");
      elem.innerText = "JavaScriptが実行されました。";
*/      
// 入力されたキーと値を取り出す
	var key = "boardingDateDD";
// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var day_index = 3;

	console.log( localData );

	 		switch (localData) {
			case "01":		        day_index = 0;			break;
			case "02":		        day_index = 1;			break;
			case "03":		        day_index = 2;			break;
			case "04":		        day_index = 3;			break;
			case "05":		        day_index = 4;			break;
			case "06":		        day_index = 5;			break;
			case "07":		        day_index = 6;			break;
			case "08":		        day_index = 7;			break;
			case "09":		        day_index = 8;			break;
			case "10":		        day_index = 9;			break;
			case "11":		        day_index =10;			break;
			case "12":		        day_index =11;			break;
			default:
		//いずれも一致しなかった場合;
		   	console.log("いずれも一致しなかった");
			break;
			};


	document.getElementById("day").selectedIndex = day_index;
//	document.getElementById("day").selectedIndex = 3;

    }
</script>
</head>
<body onload="proc();">				<!-- bodyタグのonloadに記述する方法 -->
<!--<div id="output"></div>         -->
<form name="form1">
項目を選択
<br>
<select id="day" size="8">
<option value="01">01　　　　　　　　　　　</option>
<option value="02">02</option>
<option value="03">03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>

</select>
<br>　　　　　　　　&nbsp;
<input type="button" onclick="clickBtn1()"  value="ＯＫ">
</form>
<script>
function clickBtn1(){

	const day = document.form1.day;

	// 値(数値)を取得
	const num = day.selectedIndex;
	//const num = document.form1.day.selectedIndex;

	// 値(数値)から値(value値)を取得
	const str = day.options[num].value;
	//const str = document.form1.day.options[num].value;

/*	document.getElementById("span1").textContent = str; 	*/
	
	console.log(str);	

// 入力されたキーと値を取り出す
	var key = "boardingDateDD";
	var data = str;

// ローカルストレージに保存する
	localStorage.setItem(key,data);
// セッションストレージに保存する
	sessionStorage.setItem(key,data);

// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var sessionData = sessionStorage.getItem(key);

    // 親ウィンドウのオブジェクトを操作
    window.opener.document.form1.rideDateDD.value = data;

	window.close();
	/*	window.close();	*/

}
</script>
</body>
</html>
