<!DOCTYPE html>
<html>
<head>
<meta charset="Shift-JIS">
<title>お乗りになる列車 ダイアログ</title>
<style>
/*横スクロールする */
#rideTrain_overflow-x {
  width: 300px;
  padding:8px;			/*ボックス内側の余白 */
  white-space: nowrap;  /*半角スペース、タブ、改行をブラウザでどのように表示させるかを決めます。:折り返しされない*/
  overflow-x: scroll;
/*  border: solid 1px #696969; */
  border: solid 1px #ff0000; /*赤色 */
  
  background-color : #F2F2F2 ;		/*背景色を薄い灰色 */
}	
</style>
<script>
    function proc() {
/*    
      elem = document.getElementById("output");
      elem.innerText = "JavaScriptが実行されました。";
*/      
// 入力されたキーと値を取り出す
	var key = "rideTrain";
// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var train_index = 0;

	console.log( localData );

	 		switch (localData) {
			case "0":		        train_index = 0;			break;
			case "1":		        train_index = 1;			break;
			case "2":		        train_index = 2;			break;
			case "3":		        train_index = 3;			break;
			case "4":		        train_index = 4;			break;
			case "5":		        train_index = 5;			break;
			default:
		//いずれも一致しなかった場合;
		   	console.log("いずれも一致しなかった");
			break;
			};


	document.getElementById("train").selectedIndex = train_index;
//	document.getElementById("train").selectedIndex = 3;

    }
</script>
</head>
<body onload="proc();">				<!-- bodyタグのonloadに記述する方法 -->

<div style="width:330px; height:190px; border: 1px solid #0000ff; background-color : #F2F2F2 ;">
<form name="form1">
&nbsp;項目を選択		<!-- 半角スペース -->
<br>
<div id="rideTrain_overflow-x">
<select id="train" size=6>
<option value="選択してください">選択してください</option>
<option value="のぞみ・ひかり・みずほ・さくら・つばめ">のぞみ・ひかり・みずほ・さくら・つばめ</option>
<option value="こだま">こだま</option>
<option value="はやぶさ・はやて・やまびこ・なすの・つばさ・こまち">はやぶさ・はやて・やまびこ・なすの・つばさ・こまち</option>
<option value="とき・たにがわ・かがやき・はくたか・あさま・つるぎ">とき・たにがわ・かがやき・はくたか・あさま・つるぎ</option>
<option value="在来線">在来線</option>
</select>
</div>
<br>　　　　　　　　　　　　　　　　
<input type="button" onclick="clickBtn1()"  value="ＯＫ">
</form>
</div>
<script>
function clickBtn1(){

	const train = document.form1.train;

	// 値(数値)を取得
	const num = train.selectedIndex;
	//const num = document.form1.train.selectedIndex;

	// 値(数値)から値(value値)を取得
	const str = train.options[num].value;
	//const str = document.form1.train.options[num].value;

/*	document.getElementById("span1").textContent = str; 	*/
	
	console.log(str);	

// 入力されたキーと値を取り出す
	var key = "rideTrain";
	var data = str;

// ローカルストレージに保存する
	localStorage.setItem(key,data);
// セッションストレージに保存する
	sessionStorage.setItem(key,data);

    // 親ウィンドウのオブジェクトを操作
    window.opener.document.form1.rideTrain.value = data;

// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var sessionData = sessionStorage.getItem(key);

/*          乗車駅と降車駅の表示パターン  */
	var key = "diaplay_mode";
	var data = "diaplay_start";
	localStorage.setItem(key,data);
	sessionStorage.setItem(key,data);

    // 親ウィンドウの関数を操作

    window.opener.parentFunc( );


	window.close();


}
</script>
</body>
</html>
