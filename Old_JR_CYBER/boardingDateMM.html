<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
<title>乗車月日の月を設定する</title>
<style>
 form {
  width: 183px;
  padding:8px;			/*ボックス内側の余白 */
  white-space: nowrap;  /*半角スペース、タブ、改行をブラウザでどのように表示させるかを決めます。:折り返しされない*/
  border: solid 1px #ff0000; /*赤色 */
  
  background-color : #F2F2F2 ;		/*背景色を薄い灰色 */
}	

</style>
<script>
    function proc() {
/*    
      elem = document.getElementById("output");
      elem.innerText = "JavaScriptが実行されました。";
*/      
// 入力されたキーと値を取り出す
	var key = "boardingDateMM";
// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var month_index = 3;

	console.log( localData );

	 		switch (localData) {
			case "1":		        month_index = 0;			break;
			case "2":		        month_index = 1;			break;
			case "3":		        month_index = 2;			break;
			case "4":		        month_index = 3;			break;
			case "5":		        month_index = 4;			break;
			case "6":		        month_index = 5;			break;
			case "7":		        month_index = 6;			break;
			case "8":		        month_index = 7;			break;
			case "9":		        month_index = 8;			break;
			case "10":		        month_index = 9;			break;
			case "11":		        month_index =10;			break;
			case "12":		        month_index =11;			break;
			default:
		//いずれも一致しなかった場合;
		   	console.log("いずれも一致しなかった");
			break;
			};


	document.getElementById("month").selectedIndex = month_index;
//	document.getElementById("month").selectedIndex = 3;

    }
</script>
</head>
<body onload="proc();">				<!-- bodyタグのonloadに記述する方法 -->
<!--<div id="output"></div>         -->
<form name="form1">
項目を選択
<br>
<select id="month" size="8">
<option value="01">01　　　　　　　　　　　</option>
<option value="02">02</option>
<option value="03"selected>03</option>
<option value="04">04</option>
<option value="05">05</option>
<option value="06">06</option>
<option value="07">07</option>
<option value="08">08</option>
<option value="09">09</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>

</select>
<br>　　　　　　　　&nbsp;
<input type="button" onclick="clickBtn1()"  value="ＯＫ">
</form>
<script>
function clickBtn1(){

	const month = document.form1.month;

	// 値(数値)を取得
	const num = month.selectedIndex;
	//const num = document.form1.month.selectedIndex;

	// 値(数値)から値(value値)を取得
	const str = month.options[num].value;
	//const str = document.form1.month.options[num].value;

/*	document.getElementById("span1").textContent = str; 	*/
	
	console.log(str);	

// 入力されたキーと値を取り出す
	var key = "boardingDateMM";
	var data = str;

// ローカルストレージに保存する
	localStorage.setItem(key,data);
// セッションストレージに保存する
	sessionStorage.setItem(key,data);

// 保存された値を取り出す
	var localData = localStorage.getItem(key);
	var sessionData = sessionStorage.getItem(key);

    // 親ウィンドウのオブジェクトを操作
    window.opener.document.form1.rideDateMM.value = data;

	window.close();

}
</script>
</body>
</html>
